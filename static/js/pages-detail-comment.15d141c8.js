(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-detail-comment"],{"46a3":function(e,t,i){"use strict";var n=Array.isArray||function(e){return e instanceof Array},a={SendMail:"http://www.spacehu.com/space/mail/mail.php?leo=stk@meetji.com",apiurl:"http://api_test.meetji.com",domain:"http://main.meetji.com",addr:{slideShow:"/v2/ApiHome-slideShow.htm",article:"/v2/ApiHome-article.htm",getDetail:"/v2/ApiHome-article_detail.htm",saveSingle:"/v2/ApiHome-saveSingle.htm",saveComment:"/v2/ApiHome-saveComment.htm",getCategory:"/v2/ApiHome-getCategory.htm",getSubjectCategory:"/v2/ApiHome-getSubjectCategory.htm",getAgeRange:"/v2/ApiHome-getAgeRange.htm",getBrand:"/v2/ApiHome-getBrand.htm",getRegion:"/v1/ApiEnum-getRegion.htm",getRegion2:"/v2/ApiEnum-getRegion.htm",getWeChatInfo:"/v2/ApiWeChat-getWeChatInfo.htm"},wx:{appid:"wx11eb371cd85adfd4"}},o=(e={wx:{appid:"wx11eb371cd85adfd4",access_token:"client_credential",secret:"01ef7de58bc18da629d4ec33a62744f9",getToken:"https://api.weixin.qq.com/cgi-bin/token"},getData:function(e,t,i,n){var a=[];uni.request({url:e,method:i||"GET",data:n||{},success:function(e){var t=e.data;a=t.success?t.data?t.data:t.post?t.post:t.info:{Result:"0",Msg:"请求失败，请重试!",err:""}},fail:function(e){a={Result:"0",Msg:"接口请求失败",err:e}},complete:function(e){t&&new t(a)}})},getWXInfos:function(e,t,i){var n=this.wx.appid,a=this.wx.secret,o="",c="GET";if("getCode"==t)var s="http%3a%2f%2fmain.meetji.com",l="snsapi_base",r="",u="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+n+"&redirect_uri="+s+"&response_type=code&scope="+l+"&state="+r+"#wechat_redirect";else if("getToken"==t){var d=i&&i.code?i.code:"";u="https://api.weixin.qq.com/sns/oauth2/access_token?appid="+n+"&secret="+a+"&code="+d+"&grant_type=authorization_code"}console.log("======getWXInfos========"),console.log(t),console.log(u),uni.request({url:u,method:c,success:function(e){o=e,console.log(e)},fail:function(e){o=e,console.log(e)},complete:function(i){if(console.log(t),!e)return o;new e(o)}})}},function(e){var t=[{},{},{id:5,title:"专业认证培训师,教你地道英语",overview:"免费试听体验课",price:"7999",sale:"免费",total:"1000",putout:"101",brandLogo:"../../static/ef/logo2.png",navTo:"",slideimg:["../../static/ef/img1.jpg","../../static/ef/img2.jpg"],comment:{percent:"4.5",list:[{portrait:"../../static/ef/logo.png",name:"amile",cont:"孩子喜欢这样的环境，老师很优秀，家长很放心",grade:"4.8",date:"2018-5-10"}]}}];return void 0!=e?t[e]:t});t["a"]={Interface:a,module:e,getList:o,isArray:n}},"59d1":function(e,t,i){var n=i("8990");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("65957f5c",n,!0,{sourceMap:!1,shadowMode:!1})},8660:function(e,t,i){"use strict";var n=i("d8c4"),a=i.n(n);a.a},8990:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"\n.uni-rate[data-v-75154d3f]{line-height:0;font-size:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row\n}\n.uni-rate-icon[data-v-75154d3f]{position:relative;line-height:0;font-size:0;display:inline-block\n}\n.uni-rate-icon-on[data-v-75154d3f]{position:absolute;top:0;left:0;overflow:hidden\n}",""])},"91f8":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-icon",class:["uni-icon-"+e.type],style:{color:e.color,"font-size":e.fontSize},on:{click:function(t){t=e.$handleEvent(t),e.onClick()}}})},a=[],o={props:{type:String,color:String,size:[Number,String]},computed:{fontSize:function(){return"".concat(this.size,"px")}},methods:{onClick:function(){this.$emit("click")}}},c=o,s=i("2877"),l=Object(s["a"])(c,n,a,!1,null,null,null);l.options.__file="uni-icon.vue";t["a"]=l.exports},9298:function(e,t,i){"use strict";var n=i("59d1"),a=i.n(n);a.a},a562:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"comment-page"},[i("v-uni-view",{staticClass:"comment-main"},[i("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)}}},[i("v-uni-view",{staticClass:"star-box"},[i("uni-rate",{attrs:{size:"28",value:"0",max:"5",margin:"1"},on:{change:function(t){t=e.$handleEvent(t),e.changeStar(t)}}})],1),i("v-uni-view",{staticClass:"uni-textarea"},[i("v-uni-textarea",{attrs:{value:"",name:"Comment",placeholder:"评论(至少15字)","auto-height":""},on:{blur:function(t){t=e.$handleEvent(t),e.bindTextAreaBlur(t)}}})],1),i("v-uni-view",{staticClass:"cmt-btns"},[i("v-uni-button",{staticClass:"comment-btn",attrs:{formType:"submit",loading:e.loading}},[e._v("提交评论")])],1)],1)],1)],1)},a=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-rate"},e._l(e.stars,function(t,n){return i("v-uni-view",{key:n,staticClass:"uni-rate-icon",style:{marginLeft:e.margin+"px"},on:{click:function(t){t=e.$handleEvent(t),e.onClick(n)}}},[i("uni-icon",{attrs:{size:e.size,color:e.color,type:!1===e.isFill||"false"===e.isFill?"star":"star-filled"}}),i("v-uni-view",{staticClass:"uni-rate-icon-on",style:{width:t.activeWitch}},[i("uni-icon",{attrs:{size:e.size,color:e.activeColor,type:"star-filled"}})],1)],1)}))},c=[],s=i("91f8"),l={name:"uni-rate",components:{uniIcon:s["a"]},props:{isFill:{type:[Boolean,String],default:!0},color:{type:String,default:"#ececec"},activeColor:{type:String,default:"#ffca3e"},size:{type:[Number,String],default:24},value:{type:[Number,String],default:0},max:{type:[Number,String],default:5},margin:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1}},data:function(){return console.log("data"),{maxSync:this.max,valueSync:this.value}},computed:{stars:function(){for(var e=Number(this.maxSync)?Number(this.maxSync):5,t=Number(this.valueSync)?Number(this.valueSync):0,i=[],n=Math.floor(t),a=Math.ceil(t),o=0;o<e;o++)n>o?i.push({activeWitch:"100%"}):a-1===o?i.push({activeWitch:100*(t-n)+"%"}):i.push({activeWitch:"0"});return i}},methods:{onClick:function(e){!0!==this.disabled&&"true"!==this.disabled&&(this.valueSync=e+1,this.$emit("change",{value:this.valueSync}))}}},r=l,u=(i("9298"),i("2877")),d=Object(u["a"])(r,o,c,!1,null,"75154d3f",null);d.options.__file="uni-rate.vue";var m=d.exports,p=i("46a3"),f=p["a"].module,g=p["a"].Interface,v=g.apiurl,h={data:function(){return{loading:!1,openid:"",article_id:"",star:0,comment:""}},components:{uniRate:m},onLoad:function(e){var t=e.articleid;this.article_id=t},methods:{changeStar:function(e){console.log(e),this.star=e.value},bindTextAreaBlur:function(e){this.comment=e.detail.value,console.log(e.detail.value)},formSubmit:function(e){var t=this;if(1!=this.loading){this.loading=!0;var i=this.comment,n=i.length;if(n>=15){var a={openid:this.openid,article_id:this.article_id,star:this.star,comment:i},o=v+g.addr.saveComment,c=function(e){console.log("=======saveComment========"),console.log(e),t.loading=!1,uni.showModal({title:"评论成功",content:"感谢您的评论，待管理员审核",showCancel:!1,confirmText:"确定",success:function(e){console.log(123),uni.navigateBack({delta:1})}})};f.getData(o,c,"POST",a)}else uni.showToast({title:"评论(至少15字)",icon:"none"}),this.loading=!1}}}},b=h,w=(i("8660"),Object(u["a"])(b,n,a,!1,null,"2990ea09",null));w.options.__file="comment.vue";t["default"]=w.exports},d8c4:function(e,t,i){var n=i("edca");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("196dbb36",n,!0,{sourceMap:!1,shadowMode:!1})},edca:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"\n.comment-page[data-v-2990ea09]{padding:%?60?% %?40?%\n}\n.comment-main[data-v-2990ea09]{width:100%\n}\n.star-box[data-v-2990ea09]{padding:%?40?% 0 %?30?%;border-bottom:%?2?% solid #d2d2d2;margin-bottom:%?30?%\n}\n.uni-textarea[data-v-2990ea09]{padding-bottom:%?40?%\n}\n.comment-btn[data-v-2990ea09]{border-radius:%?50?%;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#535353\n}",""])}}]);